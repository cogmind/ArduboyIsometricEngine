#include <Arduboy2.h>
#include <ArduboyTones.h>

// based on https://github.com/MLXXXp/FlappyBall/blob/master/FlappyBall.ino

ArduboyTones sound(arduboy.audio.enabled);

// ArduboyTones stream for file "LabResults-TestPolyphony.mid" created by MIDI2TONES V1.0.0 on Sun Jul 01 19:39:50 2018
// command line: midi2tones_64bit.exe -o2 LabResults-TestPolyphony 
//   From channel 0
const uint16_t polyphony PROGMEM = {
// ?
 NOTE_F6,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_G6,0, NOTE_G6,0, NOTE_A7,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_F4,0, NOTE_REST,0, NOTE_A6,0, NOTE_F6,0, NOTE_REST,0, NOTE_C5,0,
 NOTE_REST,0, NOTE_F5,0, NOTE_REST,0, NOTE_G6,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0,
 NOTE_REST,0, NOTE_F6,0, NOTE_REST,0, NOTE_REST,0, NOTE_F4,0, NOTE_REST,0, NOTE_C6,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_F5,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_F6,0, NOTE_REST,0, NOTE_F4,0,
 NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_F5,0, NOTE_REST,0, NOTE_DS4,0, NOTE_REST,0, NOTE_G6,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_A6,0, NOTE_REST,0, NOTE_REST,0, NOTE_E4,0,
 NOTE_REST,0, NOTE_AS6,0, NOTE_AS6,0, NOTE_F6,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_E5,0,
 NOTE_REST,0, NOTE_A6,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_G6,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_E4,0, NOTE_REST,0, NOTE_A7,0, NOTE_A8,0, NOTE_A9,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_E5,0, NOTE_REST,0, NOTE_C7,0, NOTE_C7,0, NOTE_C10,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0,
 NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_D4,0, NOTE_REST,0, NOTE_F7,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_A4,0, NOTE_REST,0, NOTE_G7,0, NOTE_REST,0, NOTE_REST,0, NOTE_D4,0, NOTE_REST,0, NOTE_A7,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_A4,0, NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_G7,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_A4,0, NOTE_REST,0, NOTE_F7,0, NOTE_REST,0, NOTE_REST,0, NOTE_D4,0, NOTE_REST,0,
 NOTE_C7,0, NOTE_REST,0, NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_F6,0,
 NOTE_REST,0, NOTE_D4,0, NOTE_REST,0, NOTE_A4,0, NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_C4,0,
 NOTE_REST,0, NOTE_C7,0, NOTE_REST,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0, NOTE_D7,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_E4,0, NOTE_REST,0, NOTE_E7,0, NOTE_E7,0, NOTE_F6,0, NOTE_REST,0, NOTE_AS4,0,
 NOTE_REST,0, NOTE_G5,0, NOTE_REST,0, NOTE_D7,0, NOTE_REST,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0,
 NOTE_C7,0, NOTE_REST,0, NOTE_REST,0, NOTE_C4,0, NOTE_C4,0, NOTE_REST,0, NOTE_C9,0, NOTE_C10,0,
 NOTE_C10,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_C5,0, NOTE_REST,0, NOTE_E7,0, NOTE_E7,0,
 NOTE_E7,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0,
 NOTE_D9,0, NOTE_REST,0, NOTE_F4,0, NOTE_REST,0, NOTE_A6,0, NOTE_REST,0, NOTE_A4,0, NOTE_REST,0,
 NOTE_E5,0, NOTE_REST,0, NOTE_B6,0, NOTE_REST,0, NOTE_A5,0, NOTE_REST,0, NOTE_A4,0, NOTE_REST,0,
 NOTE_CS7,0, NOTE_REST,0, NOTE_REST,0, NOTE_A5,0, NOTE_REST,0, NOTE_B6,0, NOTE_REST,0, NOTE_A4,0,
 NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_A6,0, NOTE_REST,0, NOTE_A5,0, NOTE_REST,0, NOTE_A4,0,
 NOTE_REST,0, NOTE_E6,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_A5,0, NOTE_REST,0, NOTE_A4,0,
 NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_A5,0, NOTE_REST,0, NOTE_G4,0, NOTE_REST,0, NOTE_B6,0,
 NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_CS7,0, NOTE_REST,0, NOTE_GS5,0,
 NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_D7,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_GS5,0,
 NOTE_REST,0, NOTE_CS7,0, NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_B6,0,
 NOTE_REST,0, NOTE_GS5,0, NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_GS5,0,
 NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_GS5,0, NOTE_REST,0, NOTE_FS4,0,
 NOTE_REST,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0,
 NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0,
 NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0,
 NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0,
 NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0,
 NOTE_FS7,0, NOTE_FS7,0, NOTE_FS7,0, NOTE_REST,0, NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_D5,0,
 NOTE_REST,0, NOTE_FS7,0, NOTE_REST,0, NOTE_B5,0, NOTE_REST,0, NOTE_GS4,0, NOTE_REST,0, NOTE_G7,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_B5,0, NOTE_REST,0, NOTE_FS7,0, NOTE_REST,0, NOTE_E4,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_E7,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_E4,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_GS4,0, NOTE_A4,0, NOTE_AS4,0,
 NOTE_C5,0, NOTE_E5,0, NOTE_G5,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_F6,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_G6,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_F4,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_F5,0, NOTE_REST,0,
 NOTE_G6,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_F6,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_F4,0, NOTE_REST,0, NOTE_C6,0, NOTE_REST,0, NOTE_REST,0, NOTE_F5,0, NOTE_REST,0,
 NOTE_F4,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_F5,0, NOTE_REST,0, NOTE_DS4,0, NOTE_REST,0,
 NOTE_G6,0, NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_A6,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_E4,0, NOTE_REST,0, NOTE_AS6,0, NOTE_REST,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_A6,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_G6,0, NOTE_REST,0, NOTE_REST,0, NOTE_E4,0,
 NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_C7,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_C5,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_D4,0, NOTE_REST,0, NOTE_D7,0, NOTE_D7,0,
 NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0,
 NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0,
 NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0,
 NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0, NOTE_D7,0,
 NOTE_D7,0, NOTE_D7,0, NOTE_REST,0, NOTE_E4,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0, NOTE_D7,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_E4,0, NOTE_REST,0, NOTE_E7,0, NOTE_REST,0, NOTE_REST,0, NOTE_G5,0,
 NOTE_REST,0, NOTE_D7,0, NOTE_REST,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0, NOTE_C7,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_C4,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_E7,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_AS4,0, NOTE_REST,0, NOTE_C5,0, NOTE_REST,0, NOTE_F4,0, NOTE_REST,0,
 NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0,
 NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0,
 NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0,
 NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0,
 NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0, NOTE_E6,0,
 NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0,
 NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0,
 NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0,
 NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0,
 NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0, NOTE_F6,0,
 NOTE_F6,0, NOTE_F6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0,
 NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0,
 NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0,
 NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0,
 NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0,
 NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_FS6,0, NOTE_REST,0, NOTE_GS4,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_FS7,0, NOTE_REST,0, NOTE_B5,0, NOTE_REST,0, NOTE_GS4,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_B5,0, NOTE_REST,0, NOTE_FS7,0, NOTE_REST,0, NOTE_E4,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_E7,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_E4,0,
 NOTE_REST,0, NOTE_D5,0, NOTE_REST,0, NOTE_E5,0, NOTE_REST,0, NOTE_GS4,0, NOTE_A4,0, NOTE_AS4,0,
 NOTE_C5,0, NOTE_E5,0, NOTE_G5,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0, NOTE_REST,0,
 NOTE_REST,0, NOTE_REST,0,
 TONES_END
};
// This score contains 2858 bytes.
// 270 notes had to be skipped.

 
void setup() {
}

void loop(){
   if (!arduboy.nextFrame())
    return;

  if (arduboy.pressed(LEFT_BUTTON)) { // If the button for sound toggle is pressed
    if (arduboy.audio.enabled()) {    // If sound is enabled
      sound.noTone();                 // Stop anything that's playing
      arduboy.audio.off();            // Mute sounds
    } else {
      arduboy.audio.on();             // Enable sound
      //sound.tones(bing);              // Play a sound to indicate sound has been turned on
      sound.tones(polyphony)
    }
    debounceButtons();                // Wait for button release
    }

}
